{"version":3,"file":"transactions-xpJqUSDW.js","names":["__typeError","__accessCheck","__privateGet","__privateAdd","__privateSet","_cache","object","__typeError","__accessCheck","__privateGet","__privateAdd","__privateSet","_client","_lastDigest","bcs","__typeError","__accessCheck","__privateGet","__privateAdd","_queue","__typeError","__accessCheck","__privateGet","__privateAdd","__privateSet","_signer","_cache","_defaultGasBudget","bcs","bcs"],"sources":["../../.pnpm/@mysten+utils@0.2.0/node_modules/@mysten/utils/dist/esm/with-resolver.js","../../.pnpm/@mysten+sui@1.45.2_typescript@5.9.3/node_modules/@mysten/sui/dist/esm/transactions/ObjectCache.js","../../.pnpm/@mysten+sui@1.45.2_typescript@5.9.3/node_modules/@mysten/sui/dist/esm/transactions/executor/caching.js","../../.pnpm/@mysten+sui@1.45.2_typescript@5.9.3/node_modules/@mysten/sui/dist/esm/transactions/executor/queue.js","../../.pnpm/@mysten+sui@1.45.2_typescript@5.9.3/node_modules/@mysten/sui/dist/esm/transactions/executor/serial.js","../../.pnpm/@mysten+sui@1.45.2_typescript@5.9.3/node_modules/@mysten/sui/dist/esm/transactions/executor/parallel.js","../../.pnpm/@mysten+sui@1.45.2_typescript@5.9.3/node_modules/@mysten/sui/dist/esm/transactions/intents/CoinWithBalance.js","../../.pnpm/@mysten+sui@1.45.2_typescript@5.9.3/node_modules/@mysten/sui/dist/esm/transactions/Arguments.js"],"sourcesContent":["function promiseWithResolvers() {\n  let resolver;\n  let rejecter;\n  const promise = new Promise((resolve, reject) => {\n    resolver = resolve;\n    rejecter = reject;\n  });\n  return {\n    promise,\n    resolve: resolver,\n    reject: rejecter\n  };\n}\nexport {\n  promiseWithResolvers\n};\n//# sourceMappingURL=with-resolver.js.map\n","var __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateAdd = (obj, member, value) => member.has(obj) ? __typeError(\"Cannot add the same private member more than once\") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar _caches, _cache, _onEffects;\nimport { normalizeSuiAddress } from \"../utils/sui-types.js\";\nclass AsyncCache {\n  async getObject(id) {\n    const [owned, shared] = await Promise.all([\n      this.get(\"OwnedObject\", id),\n      this.get(\"SharedOrImmutableObject\", id)\n    ]);\n    return owned ?? shared ?? null;\n  }\n  async getObjects(ids) {\n    return Promise.all(ids.map((id) => this.getObject(id)));\n  }\n  async addObject(object) {\n    if (object.owner) {\n      await this.set(\"OwnedObject\", object.objectId, object);\n    } else {\n      await this.set(\"SharedOrImmutableObject\", object.objectId, object);\n    }\n    return object;\n  }\n  async addObjects(objects) {\n    await Promise.all(objects.map(async (object) => this.addObject(object)));\n  }\n  async deleteObject(id) {\n    await Promise.all([this.delete(\"OwnedObject\", id), this.delete(\"SharedOrImmutableObject\", id)]);\n  }\n  async deleteObjects(ids) {\n    await Promise.all(ids.map((id) => this.deleteObject(id)));\n  }\n  async getMoveFunctionDefinition(ref) {\n    const functionName = `${normalizeSuiAddress(ref.package)}::${ref.module}::${ref.function}`;\n    return this.get(\"MoveFunction\", functionName);\n  }\n  async addMoveFunctionDefinition(functionEntry) {\n    const pkg = normalizeSuiAddress(functionEntry.package);\n    const functionName = `${pkg}::${functionEntry.module}::${functionEntry.function}`;\n    const entry = {\n      ...functionEntry,\n      package: pkg\n    };\n    await this.set(\"MoveFunction\", functionName, entry);\n    return entry;\n  }\n  async deleteMoveFunctionDefinition(ref) {\n    const functionName = `${normalizeSuiAddress(ref.package)}::${ref.module}::${ref.function}`;\n    await this.delete(\"MoveFunction\", functionName);\n  }\n  async getCustom(key) {\n    return this.get(\"Custom\", key);\n  }\n  async setCustom(key, value) {\n    return this.set(\"Custom\", key, value);\n  }\n  async deleteCustom(key) {\n    return this.delete(\"Custom\", key);\n  }\n}\nclass InMemoryCache extends AsyncCache {\n  constructor() {\n    super(...arguments);\n    __privateAdd(this, _caches, {\n      OwnedObject: /* @__PURE__ */ new Map(),\n      SharedOrImmutableObject: /* @__PURE__ */ new Map(),\n      MoveFunction: /* @__PURE__ */ new Map(),\n      Custom: /* @__PURE__ */ new Map()\n    });\n  }\n  async get(type, key) {\n    return __privateGet(this, _caches)[type].get(key) ?? null;\n  }\n  async set(type, key, value) {\n    __privateGet(this, _caches)[type].set(key, value);\n  }\n  async delete(type, key) {\n    __privateGet(this, _caches)[type].delete(key);\n  }\n  async clear(type) {\n    if (type) {\n      __privateGet(this, _caches)[type].clear();\n    } else {\n      for (const cache of Object.values(__privateGet(this, _caches))) {\n        cache.clear();\n      }\n    }\n  }\n}\n_caches = new WeakMap();\nclass ObjectCache {\n  constructor({ cache = new InMemoryCache(), onEffects }) {\n    __privateAdd(this, _cache);\n    __privateAdd(this, _onEffects);\n    __privateSet(this, _cache, cache);\n    __privateSet(this, _onEffects, onEffects);\n  }\n  asPlugin() {\n    return async (transactionData, _options, next) => {\n      const unresolvedObjects = transactionData.inputs.filter((input) => input.UnresolvedObject).map((input) => input.UnresolvedObject.objectId);\n      const cached = (await __privateGet(this, _cache).getObjects(unresolvedObjects)).filter(\n        (obj) => obj !== null\n      );\n      const byId = new Map(cached.map((obj) => [obj.objectId, obj]));\n      for (const input of transactionData.inputs) {\n        if (!input.UnresolvedObject) {\n          continue;\n        }\n        const cached2 = byId.get(input.UnresolvedObject.objectId);\n        if (!cached2) {\n          continue;\n        }\n        if (cached2.initialSharedVersion && !input.UnresolvedObject.initialSharedVersion) {\n          input.UnresolvedObject.initialSharedVersion = cached2.initialSharedVersion;\n        } else {\n          if (cached2.version && !input.UnresolvedObject.version) {\n            input.UnresolvedObject.version = cached2.version;\n          }\n          if (cached2.digest && !input.UnresolvedObject.digest) {\n            input.UnresolvedObject.digest = cached2.digest;\n          }\n        }\n      }\n      await Promise.all(\n        transactionData.commands.map(async (commands) => {\n          if (commands.MoveCall) {\n            const def = await this.getMoveFunctionDefinition({\n              package: commands.MoveCall.package,\n              module: commands.MoveCall.module,\n              function: commands.MoveCall.function\n            });\n            if (def) {\n              commands.MoveCall._argumentTypes = def.parameters;\n            }\n          }\n        })\n      );\n      await next();\n      await Promise.all(\n        transactionData.commands.map(async (commands) => {\n          if (commands.MoveCall?._argumentTypes) {\n            await __privateGet(this, _cache).addMoveFunctionDefinition({\n              package: commands.MoveCall.package,\n              module: commands.MoveCall.module,\n              function: commands.MoveCall.function,\n              parameters: commands.MoveCall._argumentTypes\n            });\n          }\n        })\n      );\n    };\n  }\n  async clear() {\n    await __privateGet(this, _cache).clear();\n  }\n  async getMoveFunctionDefinition(ref) {\n    return __privateGet(this, _cache).getMoveFunctionDefinition(ref);\n  }\n  async getObjects(ids) {\n    return __privateGet(this, _cache).getObjects(ids);\n  }\n  async deleteObjects(ids) {\n    return __privateGet(this, _cache).deleteObjects(ids);\n  }\n  async clearOwnedObjects() {\n    await __privateGet(this, _cache).clear(\"OwnedObject\");\n  }\n  async clearCustom() {\n    await __privateGet(this, _cache).clear(\"Custom\");\n  }\n  async getCustom(key) {\n    return __privateGet(this, _cache).getCustom(key);\n  }\n  async setCustom(key, value) {\n    return __privateGet(this, _cache).setCustom(key, value);\n  }\n  async deleteCustom(key) {\n    return __privateGet(this, _cache).deleteCustom(key);\n  }\n  async applyEffects(effects) {\n    var _a;\n    if (!effects.V2) {\n      throw new Error(`Unsupported transaction effects version ${effects.$kind}`);\n    }\n    const { lamportVersion, changedObjects } = effects.V2;\n    const deletedIds = [];\n    const addedObjects = [];\n    changedObjects.forEach(([id, change]) => {\n      if (change.outputState.NotExist) {\n        deletedIds.push(id);\n      } else if (change.outputState.ObjectWrite) {\n        const [digest, owner] = change.outputState.ObjectWrite;\n        addedObjects.push({\n          objectId: id,\n          digest,\n          version: lamportVersion,\n          owner: owner.AddressOwner ?? owner.ObjectOwner ?? null,\n          initialSharedVersion: owner.Shared?.initialSharedVersion ?? null\n        });\n      }\n    });\n    await Promise.all([\n      __privateGet(this, _cache).addObjects(addedObjects),\n      __privateGet(this, _cache).deleteObjects(deletedIds),\n      (_a = __privateGet(this, _onEffects)) == null ? void 0 : _a.call(this, effects)\n    ]);\n  }\n}\n_cache = new WeakMap();\n_onEffects = new WeakMap();\nexport {\n  AsyncCache,\n  InMemoryCache,\n  ObjectCache\n};\n//# sourceMappingURL=ObjectCache.js.map\n","var __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateAdd = (obj, member, value) => member.has(obj) ? __typeError(\"Cannot add the same private member more than once\") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar _client, _lastDigest;\nimport { bcs } from \"../../bcs/index.js\";\nimport { ObjectCache } from \"../ObjectCache.js\";\nimport { isTransaction } from \"../Transaction.js\";\nclass CachingTransactionExecutor {\n  constructor({\n    client,\n    ...options\n  }) {\n    __privateAdd(this, _client);\n    __privateAdd(this, _lastDigest, null);\n    __privateSet(this, _client, client);\n    this.cache = new ObjectCache(options);\n  }\n  /**\n   * Clears all Owned objects\n   * Immutable objects, Shared objects, and Move function definitions will be preserved\n   */\n  async reset() {\n    await Promise.all([\n      this.cache.clearOwnedObjects(),\n      this.cache.clearCustom(),\n      this.waitForLastTransaction()\n    ]);\n  }\n  async buildTransaction({\n    transaction,\n    ...options\n  }) {\n    transaction.addBuildPlugin(this.cache.asPlugin());\n    return transaction.build({\n      client: __privateGet(this, _client),\n      ...options\n    });\n  }\n  async executeTransaction({\n    transaction,\n    options,\n    ...input\n  }) {\n    const bytes = isTransaction(transaction) ? await this.buildTransaction({ transaction }) : transaction;\n    const results = await __privateGet(this, _client).executeTransactionBlock({\n      ...input,\n      transactionBlock: bytes,\n      options: {\n        ...options,\n        showRawEffects: true\n      }\n    });\n    if (results.rawEffects) {\n      const effects = bcs.TransactionEffects.parse(Uint8Array.from(results.rawEffects));\n      await this.applyEffects(effects);\n    }\n    return results;\n  }\n  async signAndExecuteTransaction({\n    options,\n    transaction,\n    ...input\n  }) {\n    transaction.setSenderIfNotSet(input.signer.toSuiAddress());\n    const bytes = await this.buildTransaction({ transaction });\n    const { signature } = await input.signer.signTransaction(bytes);\n    const results = await this.executeTransaction({\n      transaction: bytes,\n      signature,\n      options\n    });\n    return results;\n  }\n  async applyEffects(effects) {\n    __privateSet(this, _lastDigest, effects.V2?.transactionDigest ?? null);\n    await this.cache.applyEffects(effects);\n  }\n  async waitForLastTransaction() {\n    if (__privateGet(this, _lastDigest)) {\n      await __privateGet(this, _client).waitForTransaction({ digest: __privateGet(this, _lastDigest) });\n      __privateSet(this, _lastDigest, null);\n    }\n  }\n}\n_client = new WeakMap();\n_lastDigest = new WeakMap();\nexport {\n  CachingTransactionExecutor\n};\n//# sourceMappingURL=caching.js.map\n","var __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateAdd = (obj, member, value) => member.has(obj) ? __typeError(\"Cannot add the same private member more than once\") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\nvar _queue, _queue2;\nclass SerialQueue {\n  constructor() {\n    __privateAdd(this, _queue, []);\n  }\n  async runTask(task) {\n    return new Promise((resolve, reject) => {\n      __privateGet(this, _queue).push(() => {\n        task().finally(() => {\n          __privateGet(this, _queue).shift();\n          if (__privateGet(this, _queue).length > 0) {\n            __privateGet(this, _queue)[0]();\n          }\n        }).then(resolve, reject);\n      });\n      if (__privateGet(this, _queue).length === 1) {\n        __privateGet(this, _queue)[0]();\n      }\n    });\n  }\n}\n_queue = new WeakMap();\nclass ParallelQueue {\n  constructor(maxTasks) {\n    __privateAdd(this, _queue2, []);\n    this.activeTasks = 0;\n    this.maxTasks = maxTasks;\n  }\n  runTask(task) {\n    return new Promise((resolve, reject) => {\n      if (this.activeTasks < this.maxTasks) {\n        this.activeTasks++;\n        task().finally(() => {\n          if (__privateGet(this, _queue2).length > 0) {\n            __privateGet(this, _queue2).shift()();\n          } else {\n            this.activeTasks--;\n          }\n        }).then(resolve, reject);\n      } else {\n        __privateGet(this, _queue2).push(() => {\n          task().finally(() => {\n            if (__privateGet(this, _queue2).length > 0) {\n              __privateGet(this, _queue2).shift()();\n            } else {\n              this.activeTasks--;\n            }\n          }).then(resolve, reject);\n        });\n      }\n    });\n  }\n}\n_queue2 = new WeakMap();\nexport {\n  ParallelQueue,\n  SerialQueue\n};\n//# sourceMappingURL=queue.js.map\n","var __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateAdd = (obj, member, value) => member.has(obj) ? __typeError(\"Cannot add the same private member more than once\") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar _queue, _signer, _cache, _defaultGasBudget, _cacheGasCoin, _buildTransaction;\nimport { toBase64 } from \"@mysten/bcs\";\nimport { isTransaction, Transaction } from \"../Transaction.js\";\nimport { CachingTransactionExecutor } from \"./caching.js\";\nimport { SerialQueue } from \"./queue.js\";\nclass SerialTransactionExecutor {\n  constructor({\n    signer,\n    defaultGasBudget = 50000000n,\n    ...options\n  }) {\n    __privateAdd(this, _queue, new SerialQueue());\n    __privateAdd(this, _signer);\n    __privateAdd(this, _cache);\n    __privateAdd(this, _defaultGasBudget);\n    __privateAdd(this, _cacheGasCoin, async (effects) => {\n      if (!effects.V2) {\n        return;\n      }\n      const gasCoin = getGasCoinFromEffects(effects).ref;\n      if (gasCoin) {\n        __privateGet(this, _cache).cache.setCustom(\"gasCoin\", gasCoin);\n      } else {\n        __privateGet(this, _cache).cache.deleteCustom(\"gasCoin\");\n      }\n    });\n    __privateAdd(this, _buildTransaction, async (transaction) => {\n      const gasCoin = await __privateGet(this, _cache).cache.getCustom(\"gasCoin\");\n      const copy = Transaction.from(transaction);\n      if (gasCoin) {\n        copy.setGasPayment([gasCoin]);\n      }\n      copy.setGasBudgetIfNotSet(__privateGet(this, _defaultGasBudget));\n      copy.setSenderIfNotSet(__privateGet(this, _signer).toSuiAddress());\n      return __privateGet(this, _cache).buildTransaction({ transaction: copy });\n    });\n    __privateSet(this, _signer, signer);\n    __privateSet(this, _defaultGasBudget, defaultGasBudget);\n    __privateSet(this, _cache, new CachingTransactionExecutor({\n      client: options.client,\n      cache: options.cache,\n      onEffects: (effects) => __privateGet(this, _cacheGasCoin).call(this, effects)\n    }));\n  }\n  async applyEffects(effects) {\n    return __privateGet(this, _cache).applyEffects(effects);\n  }\n  async buildTransaction(transaction) {\n    return __privateGet(this, _queue).runTask(() => __privateGet(this, _buildTransaction).call(this, transaction));\n  }\n  resetCache() {\n    return __privateGet(this, _cache).reset();\n  }\n  waitForLastTransaction() {\n    return __privateGet(this, _cache).waitForLastTransaction();\n  }\n  executeTransaction(transaction, options, additionalSignatures = []) {\n    return __privateGet(this, _queue).runTask(async () => {\n      const bytes = isTransaction(transaction) ? await __privateGet(this, _buildTransaction).call(this, transaction) : transaction;\n      const { signature } = await __privateGet(this, _signer).signTransaction(bytes);\n      const results = await __privateGet(this, _cache).executeTransaction({\n        signature: [signature, ...additionalSignatures],\n        transaction: bytes,\n        options\n      }).catch(async (error) => {\n        await this.resetCache();\n        throw error;\n      });\n      const effectsBytes = Uint8Array.from(results.rawEffects);\n      return {\n        digest: results.digest,\n        effects: toBase64(effectsBytes),\n        data: results\n      };\n    });\n  }\n}\n_queue = new WeakMap();\n_signer = new WeakMap();\n_cache = new WeakMap();\n_defaultGasBudget = new WeakMap();\n_cacheGasCoin = new WeakMap();\n_buildTransaction = new WeakMap();\nfunction getGasCoinFromEffects(effects) {\n  if (!effects.V2) {\n    throw new Error(\"Unexpected effects version\");\n  }\n  const gasObjectChange = effects.V2.changedObjects[effects.V2.gasObjectIndex];\n  if (!gasObjectChange) {\n    throw new Error(\"Gas object not found in effects\");\n  }\n  const [objectId, { outputState }] = gasObjectChange;\n  if (!outputState.ObjectWrite) {\n    throw new Error(\"Unexpected gas object state\");\n  }\n  const [digest, owner] = outputState.ObjectWrite;\n  return {\n    ref: {\n      objectId,\n      digest,\n      version: effects.V2.lamportVersion\n    },\n    owner: owner.AddressOwner || owner.ObjectOwner\n  };\n}\nexport {\n  SerialTransactionExecutor,\n  getGasCoinFromEffects\n};\n//# sourceMappingURL=serial.js.map\n","var __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateAdd = (obj, member, value) => member.has(obj) ? __typeError(\"Cannot add the same private member more than once\") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar __privateMethod = (obj, member, method) => (__accessCheck(obj, member, \"access private method\"), method);\nvar __privateWrapper = (obj, member, setter, getter) => ({\n  set _(value) {\n    __privateSet(obj, member, value, setter);\n  },\n  get _() {\n    return __privateGet(obj, member, getter);\n  }\n});\nvar _signer, _client, _coinBatchSize, _initialCoinBalance, _minimumCoinBalance, _epochBoundaryWindow, _defaultGasBudget, _maxPoolSize, _sourceCoins, _coinPool, _cache, _objectIdQueues, _buildQueue, _executeQueue, _lastDigest, _cacheLock, _pendingTransactions, _gasPrice, _ParallelTransactionExecutor_instances, getUsedObjects_fn, execute_fn, updateCache_fn, waitForLastDigest_fn, getGasCoin_fn, getGasPrice_fn, refillCoinPool_fn;\nimport { toBase64 } from \"@mysten/bcs\";\nimport { promiseWithResolvers } from \"@mysten/utils\";\nimport { bcs } from \"../../bcs/index.js\";\nimport { Transaction } from \"../Transaction.js\";\nimport { TransactionDataBuilder } from \"../TransactionData.js\";\nimport { CachingTransactionExecutor } from \"./caching.js\";\nimport { ParallelQueue, SerialQueue } from \"./queue.js\";\nimport { getGasCoinFromEffects } from \"./serial.js\";\nconst PARALLEL_EXECUTOR_DEFAULTS = {\n  coinBatchSize: 20,\n  initialCoinBalance: 200000000n,\n  minimumCoinBalance: 50000000n,\n  maxPoolSize: 50,\n  epochBoundaryWindow: 1e3\n};\nclass ParallelTransactionExecutor {\n  constructor(options) {\n    __privateAdd(this, _ParallelTransactionExecutor_instances);\n    __privateAdd(this, _signer);\n    __privateAdd(this, _client);\n    __privateAdd(this, _coinBatchSize);\n    __privateAdd(this, _initialCoinBalance);\n    __privateAdd(this, _minimumCoinBalance);\n    __privateAdd(this, _epochBoundaryWindow);\n    __privateAdd(this, _defaultGasBudget);\n    __privateAdd(this, _maxPoolSize);\n    __privateAdd(this, _sourceCoins);\n    __privateAdd(this, _coinPool, []);\n    __privateAdd(this, _cache);\n    __privateAdd(this, _objectIdQueues, /* @__PURE__ */ new Map());\n    __privateAdd(this, _buildQueue, new SerialQueue());\n    __privateAdd(this, _executeQueue);\n    __privateAdd(this, _lastDigest, null);\n    __privateAdd(this, _cacheLock, null);\n    __privateAdd(this, _pendingTransactions, 0);\n    __privateAdd(this, _gasPrice, null);\n    __privateSet(this, _signer, options.signer);\n    __privateSet(this, _client, options.client);\n    __privateSet(this, _coinBatchSize, options.coinBatchSize ?? PARALLEL_EXECUTOR_DEFAULTS.coinBatchSize);\n    __privateSet(this, _initialCoinBalance, options.initialCoinBalance ?? PARALLEL_EXECUTOR_DEFAULTS.initialCoinBalance);\n    __privateSet(this, _minimumCoinBalance, options.minimumCoinBalance ?? PARALLEL_EXECUTOR_DEFAULTS.minimumCoinBalance);\n    __privateSet(this, _defaultGasBudget, options.defaultGasBudget ?? __privateGet(this, _minimumCoinBalance));\n    __privateSet(this, _epochBoundaryWindow, options.epochBoundaryWindow ?? PARALLEL_EXECUTOR_DEFAULTS.epochBoundaryWindow);\n    __privateSet(this, _maxPoolSize, options.maxPoolSize ?? PARALLEL_EXECUTOR_DEFAULTS.maxPoolSize);\n    __privateSet(this, _cache, new CachingTransactionExecutor({\n      client: options.client,\n      cache: options.cache\n    }));\n    __privateSet(this, _executeQueue, new ParallelQueue(__privateGet(this, _maxPoolSize)));\n    __privateSet(this, _sourceCoins, options.sourceCoins ? new Map(options.sourceCoins.map((id) => [id, null])) : null);\n  }\n  resetCache() {\n    __privateSet(this, _gasPrice, null);\n    return __privateMethod(this, _ParallelTransactionExecutor_instances, updateCache_fn).call(this, () => __privateGet(this, _cache).reset());\n  }\n  async waitForLastTransaction() {\n    await __privateMethod(this, _ParallelTransactionExecutor_instances, updateCache_fn).call(this, () => __privateMethod(this, _ParallelTransactionExecutor_instances, waitForLastDigest_fn).call(this));\n  }\n  async executeTransaction(transaction, options, additionalSignatures = []) {\n    const { promise, resolve, reject } = promiseWithResolvers();\n    const usedObjects = await __privateMethod(this, _ParallelTransactionExecutor_instances, getUsedObjects_fn).call(this, transaction);\n    const execute = () => {\n      __privateGet(this, _executeQueue).runTask(() => {\n        const promise2 = __privateMethod(this, _ParallelTransactionExecutor_instances, execute_fn).call(this, transaction, usedObjects, options, additionalSignatures);\n        return promise2.then(resolve, reject);\n      });\n    };\n    const conflicts = /* @__PURE__ */ new Set();\n    usedObjects.forEach((objectId) => {\n      const queue = __privateGet(this, _objectIdQueues).get(objectId);\n      if (queue) {\n        conflicts.add(objectId);\n        __privateGet(this, _objectIdQueues).get(objectId).push(() => {\n          conflicts.delete(objectId);\n          if (conflicts.size === 0) {\n            execute();\n          }\n        });\n      } else {\n        __privateGet(this, _objectIdQueues).set(objectId, []);\n      }\n    });\n    if (conflicts.size === 0) {\n      execute();\n    }\n    return promise;\n  }\n}\n_signer = new WeakMap();\n_client = new WeakMap();\n_coinBatchSize = new WeakMap();\n_initialCoinBalance = new WeakMap();\n_minimumCoinBalance = new WeakMap();\n_epochBoundaryWindow = new WeakMap();\n_defaultGasBudget = new WeakMap();\n_maxPoolSize = new WeakMap();\n_sourceCoins = new WeakMap();\n_coinPool = new WeakMap();\n_cache = new WeakMap();\n_objectIdQueues = new WeakMap();\n_buildQueue = new WeakMap();\n_executeQueue = new WeakMap();\n_lastDigest = new WeakMap();\n_cacheLock = new WeakMap();\n_pendingTransactions = new WeakMap();\n_gasPrice = new WeakMap();\n_ParallelTransactionExecutor_instances = new WeakSet();\ngetUsedObjects_fn = async function(transaction) {\n  const usedObjects = /* @__PURE__ */ new Set();\n  let serialized = false;\n  transaction.addSerializationPlugin(async (blockData, _options, next) => {\n    await next();\n    if (serialized) {\n      return;\n    }\n    serialized = true;\n    blockData.inputs.forEach((input) => {\n      if (input.Object?.ImmOrOwnedObject?.objectId) {\n        usedObjects.add(input.Object.ImmOrOwnedObject.objectId);\n      } else if (input.Object?.Receiving?.objectId) {\n        usedObjects.add(input.Object.Receiving.objectId);\n      } else if (input.UnresolvedObject?.objectId && !input.UnresolvedObject.initialSharedVersion) {\n        usedObjects.add(input.UnresolvedObject.objectId);\n      }\n    });\n  });\n  await transaction.prepareForSerialization({ client: __privateGet(this, _client) });\n  return usedObjects;\n};\nexecute_fn = async function(transaction, usedObjects, options, additionalSignatures = []) {\n  let gasCoin;\n  try {\n    transaction.setSenderIfNotSet(__privateGet(this, _signer).toSuiAddress());\n    await __privateGet(this, _buildQueue).runTask(async () => {\n      const data = transaction.getData();\n      if (!data.gasData.price) {\n        transaction.setGasPrice(await __privateMethod(this, _ParallelTransactionExecutor_instances, getGasPrice_fn).call(this));\n      }\n      transaction.setGasBudgetIfNotSet(__privateGet(this, _defaultGasBudget));\n      await __privateMethod(this, _ParallelTransactionExecutor_instances, updateCache_fn).call(this);\n      gasCoin = await __privateMethod(this, _ParallelTransactionExecutor_instances, getGasCoin_fn).call(this);\n      __privateWrapper(this, _pendingTransactions)._++;\n      transaction.setGasPayment([\n        {\n          objectId: gasCoin.id,\n          version: gasCoin.version,\n          digest: gasCoin.digest\n        }\n      ]);\n      await __privateGet(this, _cache).buildTransaction({ transaction, onlyTransactionKind: true });\n    });\n    const bytes = await transaction.build({ client: __privateGet(this, _client) });\n    const { signature } = await __privateGet(this, _signer).signTransaction(bytes);\n    const results = await __privateGet(this, _cache).executeTransaction({\n      transaction: bytes,\n      signature: [signature, ...additionalSignatures],\n      options: {\n        ...options,\n        showEffects: true\n      }\n    });\n    const effectsBytes = Uint8Array.from(results.rawEffects);\n    const effects = bcs.TransactionEffects.parse(effectsBytes);\n    const gasResult = getGasCoinFromEffects(effects);\n    const gasUsed = effects.V2?.gasUsed;\n    if (gasCoin && gasUsed && gasResult.owner === __privateGet(this, _signer).toSuiAddress()) {\n      const totalUsed = BigInt(gasUsed.computationCost) + BigInt(gasUsed.storageCost) + BigInt(gasUsed.storageCost) - BigInt(gasUsed.storageRebate);\n      const remainingBalance = gasCoin.balance - totalUsed;\n      let usesGasCoin = false;\n      new TransactionDataBuilder(transaction.getData()).mapArguments((arg) => {\n        if (arg.$kind === \"GasCoin\") {\n          usesGasCoin = true;\n        }\n        return arg;\n      });\n      if (!usesGasCoin && remainingBalance >= __privateGet(this, _minimumCoinBalance)) {\n        __privateGet(this, _coinPool).push({\n          id: gasResult.ref.objectId,\n          version: gasResult.ref.version,\n          digest: gasResult.ref.digest,\n          balance: remainingBalance\n        });\n      } else {\n        if (!__privateGet(this, _sourceCoins)) {\n          __privateSet(this, _sourceCoins, /* @__PURE__ */ new Map());\n        }\n        __privateGet(this, _sourceCoins).set(gasResult.ref.objectId, gasResult.ref);\n      }\n    }\n    __privateSet(this, _lastDigest, results.digest);\n    return {\n      digest: results.digest,\n      effects: toBase64(effectsBytes),\n      data: results\n    };\n  } catch (error) {\n    if (gasCoin) {\n      if (!__privateGet(this, _sourceCoins)) {\n        __privateSet(this, _sourceCoins, /* @__PURE__ */ new Map());\n      }\n      __privateGet(this, _sourceCoins).set(gasCoin.id, null);\n    }\n    await __privateMethod(this, _ParallelTransactionExecutor_instances, updateCache_fn).call(this, async () => {\n      await Promise.all([\n        __privateGet(this, _cache).cache.deleteObjects([...usedObjects]),\n        __privateMethod(this, _ParallelTransactionExecutor_instances, waitForLastDigest_fn).call(this)\n      ]);\n    });\n    throw error;\n  } finally {\n    usedObjects.forEach((objectId) => {\n      const queue = __privateGet(this, _objectIdQueues).get(objectId);\n      if (queue && queue.length > 0) {\n        queue.shift()();\n      } else if (queue) {\n        __privateGet(this, _objectIdQueues).delete(objectId);\n      }\n    });\n    __privateWrapper(this, _pendingTransactions)._--;\n  }\n};\nupdateCache_fn = async function(fn) {\n  if (__privateGet(this, _cacheLock)) {\n    await __privateGet(this, _cacheLock);\n  }\n  __privateSet(this, _cacheLock, fn?.().then(\n    () => {\n      __privateSet(this, _cacheLock, null);\n    },\n    () => {\n    }\n  ) ?? null);\n};\nwaitForLastDigest_fn = async function() {\n  const digest = __privateGet(this, _lastDigest);\n  if (digest) {\n    __privateSet(this, _lastDigest, null);\n    await __privateGet(this, _client).waitForTransaction({ digest });\n  }\n};\ngetGasCoin_fn = async function() {\n  if (__privateGet(this, _coinPool).length === 0 && __privateGet(this, _pendingTransactions) <= __privateGet(this, _maxPoolSize)) {\n    await __privateMethod(this, _ParallelTransactionExecutor_instances, refillCoinPool_fn).call(this);\n  }\n  if (__privateGet(this, _coinPool).length === 0) {\n    throw new Error(\"No coins available\");\n  }\n  const coin = __privateGet(this, _coinPool).shift();\n  return coin;\n};\ngetGasPrice_fn = async function() {\n  const remaining = __privateGet(this, _gasPrice) ? __privateGet(this, _gasPrice).expiration - __privateGet(this, _epochBoundaryWindow) - Date.now() : 0;\n  if (remaining > 0) {\n    return __privateGet(this, _gasPrice).price;\n  }\n  if (__privateGet(this, _gasPrice)) {\n    const timeToNextEpoch = Math.max(\n      __privateGet(this, _gasPrice).expiration + __privateGet(this, _epochBoundaryWindow) - Date.now(),\n      1e3\n    );\n    await new Promise((resolve) => setTimeout(resolve, timeToNextEpoch));\n  }\n  const state = await __privateGet(this, _client).getLatestSuiSystemState();\n  __privateSet(this, _gasPrice, {\n    price: BigInt(state.referenceGasPrice),\n    expiration: Number.parseInt(state.epochStartTimestampMs, 10) + Number.parseInt(state.epochDurationMs, 10)\n  });\n  return __privateMethod(this, _ParallelTransactionExecutor_instances, getGasPrice_fn).call(this);\n};\nrefillCoinPool_fn = async function() {\n  const batchSize = Math.min(\n    __privateGet(this, _coinBatchSize),\n    __privateGet(this, _maxPoolSize) - (__privateGet(this, _coinPool).length + __privateGet(this, _pendingTransactions)) + 1\n  );\n  if (batchSize === 0) {\n    return;\n  }\n  const txb = new Transaction();\n  const address = __privateGet(this, _signer).toSuiAddress();\n  txb.setSender(address);\n  if (__privateGet(this, _sourceCoins)) {\n    const refs = [];\n    const ids = [];\n    for (const [id, ref] of __privateGet(this, _sourceCoins)) {\n      if (ref) {\n        refs.push(ref);\n      } else {\n        ids.push(id);\n      }\n    }\n    if (ids.length > 0) {\n      const coins = await __privateGet(this, _client).multiGetObjects({\n        ids\n      });\n      refs.push(\n        ...coins.filter((coin) => coin.data !== null).map(({ data }) => ({\n          objectId: data.objectId,\n          version: data.version,\n          digest: data.digest\n        }))\n      );\n    }\n    txb.setGasPayment(refs);\n    __privateSet(this, _sourceCoins, /* @__PURE__ */ new Map());\n  }\n  const amounts = new Array(batchSize).fill(__privateGet(this, _initialCoinBalance));\n  const results = txb.splitCoins(txb.gas, amounts);\n  const coinResults = [];\n  for (let i = 0; i < amounts.length; i++) {\n    coinResults.push(results[i]);\n  }\n  txb.transferObjects(coinResults, address);\n  await this.waitForLastTransaction();\n  const result = await __privateGet(this, _client).signAndExecuteTransaction({\n    transaction: txb,\n    signer: __privateGet(this, _signer),\n    options: {\n      showRawEffects: true\n    }\n  });\n  const effects = bcs.TransactionEffects.parse(Uint8Array.from(result.rawEffects));\n  effects.V2?.changedObjects.forEach(([id, { outputState }], i) => {\n    if (i === effects.V2?.gasObjectIndex || !outputState.ObjectWrite) {\n      return;\n    }\n    __privateGet(this, _coinPool).push({\n      id,\n      version: effects.V2.lamportVersion,\n      digest: outputState.ObjectWrite[0],\n      balance: BigInt(__privateGet(this, _initialCoinBalance))\n    });\n  });\n  if (!__privateGet(this, _sourceCoins)) {\n    __privateSet(this, _sourceCoins, /* @__PURE__ */ new Map());\n  }\n  const gasObject = getGasCoinFromEffects(effects).ref;\n  __privateGet(this, _sourceCoins).set(gasObject.objectId, gasObject);\n  await __privateGet(this, _client).waitForTransaction({ digest: result.digest });\n};\nexport {\n  ParallelTransactionExecutor\n};\n//# sourceMappingURL=parallel.js.map\n","import { bigint, object, parse, string } from \"valibot\";\nimport { bcs } from \"../../bcs/index.js\";\nimport { normalizeStructTag } from \"../../utils/sui-types.js\";\nimport { Commands } from \"../Commands.js\";\nimport { Inputs } from \"../Inputs.js\";\nimport { getClient } from \"../resolve.js\";\nconst COIN_WITH_BALANCE = \"CoinWithBalance\";\nconst SUI_TYPE = normalizeStructTag(\"0x2::sui::SUI\");\nfunction coinWithBalance({\n  type = SUI_TYPE,\n  balance,\n  useGasCoin = true\n}) {\n  let coinResult = null;\n  return (tx) => {\n    if (coinResult) {\n      return coinResult;\n    }\n    tx.addIntentResolver(COIN_WITH_BALANCE, resolveCoinBalance);\n    const coinType = type === \"gas\" ? type : normalizeStructTag(type);\n    coinResult = tx.add(\n      Commands.Intent({\n        name: COIN_WITH_BALANCE,\n        inputs: {},\n        data: {\n          type: coinType === SUI_TYPE && useGasCoin ? \"gas\" : coinType,\n          balance: BigInt(balance)\n        }\n      })\n    );\n    return coinResult;\n  };\n}\nconst CoinWithBalanceData = object({\n  type: string(),\n  balance: bigint()\n});\nasync function resolveCoinBalance(transactionData, buildOptions, next) {\n  const coinTypes = /* @__PURE__ */ new Set();\n  const totalByType = /* @__PURE__ */ new Map();\n  if (!transactionData.sender) {\n    throw new Error(\"Sender must be set to resolve CoinWithBalance\");\n  }\n  for (const command of transactionData.commands) {\n    if (command.$kind === \"$Intent\" && command.$Intent.name === COIN_WITH_BALANCE) {\n      const { type, balance } = parse(CoinWithBalanceData, command.$Intent.data);\n      if (type !== \"gas\" && balance > 0n) {\n        coinTypes.add(type);\n      }\n      totalByType.set(type, (totalByType.get(type) ?? 0n) + balance);\n    }\n  }\n  const usedIds = /* @__PURE__ */ new Set();\n  for (const input of transactionData.inputs) {\n    if (input.Object?.ImmOrOwnedObject) {\n      usedIds.add(input.Object.ImmOrOwnedObject.objectId);\n    }\n    if (input.UnresolvedObject?.objectId) {\n      usedIds.add(input.UnresolvedObject.objectId);\n    }\n  }\n  const coinsByType = /* @__PURE__ */ new Map();\n  const client = getSuiClient(buildOptions);\n  await Promise.all(\n    [...coinTypes].map(async (coinType) => {\n      coinsByType.set(\n        coinType,\n        await getCoinsOfType({\n          coinType,\n          balance: totalByType.get(coinType),\n          client,\n          owner: transactionData.sender,\n          usedIds\n        })\n      );\n    })\n  );\n  const mergedCoins = /* @__PURE__ */ new Map();\n  mergedCoins.set(\"gas\", { $kind: \"GasCoin\", GasCoin: true });\n  for (const [index, transaction] of transactionData.commands.entries()) {\n    if (transaction.$kind !== \"$Intent\" || transaction.$Intent.name !== COIN_WITH_BALANCE) {\n      continue;\n    }\n    const { type, balance } = transaction.$Intent.data;\n    if (balance === 0n && type !== \"gas\") {\n      transactionData.replaceCommand(\n        index,\n        Commands.MoveCall({ target: \"0x2::coin::zero\", typeArguments: [type] })\n      );\n      continue;\n    }\n    const commands = [];\n    if (!mergedCoins.has(type)) {\n      const [first, ...rest] = coinsByType.get(type).map(\n        (coin) => transactionData.addInput(\n          \"object\",\n          Inputs.ObjectRef({\n            objectId: coin.coinObjectId,\n            digest: coin.digest,\n            version: coin.version\n          })\n        )\n      );\n      if (rest.length > 0) {\n        commands.push(Commands.MergeCoins(first, rest));\n      }\n      mergedCoins.set(type, first);\n    }\n    commands.push(\n      Commands.SplitCoins(mergedCoins.get(type), [\n        transactionData.addInput(\"pure\", Inputs.Pure(bcs.u64().serialize(balance)))\n      ])\n    );\n    transactionData.replaceCommand(index, commands);\n    transactionData.mapArguments((arg) => {\n      if (arg.$kind === \"Result\" && arg.Result === index) {\n        return {\n          $kind: \"NestedResult\",\n          NestedResult: [index + commands.length - 1, 0]\n        };\n      }\n      return arg;\n    });\n  }\n  return next();\n}\nasync function getCoinsOfType({\n  coinType,\n  balance,\n  client,\n  owner,\n  usedIds\n}) {\n  let remainingBalance = balance;\n  const coins = [];\n  return loadMoreCoins();\n  async function loadMoreCoins(cursor = null) {\n    const { data, hasNextPage, nextCursor } = await client.getCoins({ owner, coinType, cursor });\n    const sortedCoins = data.sort((a, b) => Number(BigInt(b.balance) - BigInt(a.balance)));\n    for (const coin of sortedCoins) {\n      if (usedIds.has(coin.coinObjectId)) {\n        continue;\n      }\n      const coinBalance = BigInt(coin.balance);\n      coins.push(coin);\n      remainingBalance -= coinBalance;\n      if (remainingBalance <= 0) {\n        return coins;\n      }\n    }\n    if (hasNextPage) {\n      return loadMoreCoins(nextCursor);\n    }\n    throw new Error(`Not enough coins of type ${coinType} to satisfy requested balance`);\n  }\n}\nfunction getSuiClient(options) {\n  const client = getClient(options);\n  if (!client.jsonRpc) {\n    throw new Error(`CoinWithBalance intent currently only works with SuiClient`);\n  }\n  return client;\n}\nexport {\n  coinWithBalance,\n  getSuiClient\n};\n//# sourceMappingURL=CoinWithBalance.js.map\n","import { createObjectMethods } from \"./object.js\";\nimport { createPure } from \"./pure.js\";\nconst Arguments = {\n  pure: createPure((value) => (tx) => tx.pure(value)),\n  object: createObjectMethods((value) => (tx) => tx.object(value)),\n  sharedObjectRef: (...args) => (tx) => tx.sharedObjectRef(...args),\n  objectRef: (...args) => (tx) => tx.objectRef(...args),\n  receivingRef: (...args) => (tx) => tx.receivingRef(...args)\n};\nexport {\n  Arguments\n};\n//# sourceMappingURL=Arguments.js.map\n"],"x_google_ignoreList":[0,1,2,3,4,5,6,7],"mappings":"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"}